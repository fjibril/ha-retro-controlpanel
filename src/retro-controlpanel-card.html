<ha-card header="Hello ${this.model.userName}!">
    <div class="card-content card-container">
        <div class="grid">
            ${repeat(this.config.rows, (row, rowIndex) => rowIndex, (row, rowIndex) => html`
                <div class="grid-row">
                ${repeat(row.entities, (cellEntity, cellIndex) => cellIndex, (cellEntity) => html`
                    <div class="grid-cell">
                        <retro-label .entity=${cellEntity.entity} .hass="${this._hass}" variant="dymo"></retro-label>
                        ${choose(cellEntity.type,
                            [
                                ['seven_segment', () => html`<seven-segment-display .config=${cellEntity} .hass=${this._hass}></seven-segment-display>`],
                                ['flip_switch',  () => html`<flip-switch .config=${cellEntity} .hass=${this._hass}></flip-switch>`],
                                ['button',  () => html`<push-button .config=${cellEntity} .hass=${this._hass}></push-button>`],
                                ['error',   () => html`<span class="icon">‚ùå</span> Error`],
                            ],
                            () =>  // Default case
                                html`${cellEntity}
                                <p>The ${this.model.entityId} is ${this.model.stateStr}.</p>
                                <pre>${JSON.stringify(cellEntity, null, 2)}</pre>`
                        )}

                    </div>
                `)}
                </div>
            `)}
        </div>
    </div>
</ha-card>